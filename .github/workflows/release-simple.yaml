name: ğŸš€ Simple Release (Backup)
on:
  push:
    tags: ["*"]

permissions:
  contents: write
  packages: write

jobs:
  simple_release:
    name: ğŸ‰ Simple Release Creation
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ“¥ Checkout code
        uses: actions/checkout@v4

      - name: ğŸ¥Ÿ Setup Bun
        uses: oven-sh/setup-bun@v2

      - name: ğŸ“¦ Install Dependencies
        run: bun install

      - name: ğŸ”¨ Build Binary Artifacts
        run: |
          mkdir -p build
          bun build src/runner.ts --target=bun --minify --outfile build/bundle-min.js
          bun build build/bundle-min.js --compile --outfile build/seda-pusher-linux-x64 --target=bun-linux-x64
          bun build build/bundle-min.js --compile --outfile build/seda-pusher-linux-arm64 --target=bun-linux-arm64
          chmod +x build/seda-pusher-*

      - name: ğŸ‰ Create Release with GitHub CLI
        run: |
          gh release create ${{ github.ref_name }} \
            --title "ğŸš€ SEDA Push Solver Release ${{ github.ref_name }}" \
            --notes "
          ## ğŸš€ SEDA Push Solver Release ${{ github.ref_name }}
          
          This release includes:
          - ğŸ“¦ Standalone binary artifacts for Linux
          - ğŸ”„ Automated DataRequest scheduling capabilities
          - ğŸ›¡ï¸ Enhanced retry logic and error handling
          
          ### Binary Usage
          \`\`\`bash
          # Download and run binary directly
          chmod +x seda-pusher-linux-x64
          ./seda-pusher-linux-x64
          \`\`\`
          " \
            build/seda-pusher-linux-x64 \
            build/seda-pusher-linux-arm64
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }} 